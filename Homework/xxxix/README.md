## დავალება 07.10.2022 (ჩაბარების ბოლო ვადა 13.10.2022 23:59).

შექმენით JAX-WS ორი ვებ სერვისი (პირველი WRAPPED და მეორე BARE პარამეტრების სტილით) და ორივე დაა-deploy-ეთ Tomcat-ზე. აპლიკაციას Tomcat-ის conf-ში უნდა ჰქონდეს config.properties ფაილი შემდეგი შიგთავსით:

database = აქ უნდა ეწეროს persons.xml ფაილის სრული მისამართი.

username = აპლიკაციის იუზერი (გამოიყენება მხოლოდ BARE ვებ სერვისში, ხოლო WRAPPED-ს საერთოდ არ აქვს username/password-ით ავტორიზაცია).

password = აპლიკაციის პაროლი (გამოიყენება მხოლოდ BARE ვებ სერვისში, ხოლო WRAPPED-ს საერთოდ არ აქვს username/password-ით ავტორიზაცია).

allowed_ip = დასაშვები IP-ების სია (ერთზე მეტი მნიშვნელობის შემთხვავში გაყოფილი ; წერტილ-მძიმით), რომლიდანაც შესაძლოა მოხდეს ვებ სერვისის გამოძახება.

config.properties ფაილი მეხსიერებაში უნდა იტვირთებოდეს ერთხელ და იქიდან ხებოდეს მისი წაკითხვა და თუ შეიცვალა მყარ დისკზე, მხოლოდ მაშინ ჩაიტვირთოს ხელახლა მეხსიერებაში.
persons.xml ფაილი შექმენით ხელით <person id="1"><first-name>Giorgi</first-name><last-name>Katsadze</last-name><age>33</age></person> სტრუქტურით და მასში ხელით ჩაწერეთ 10 ადამიანის მონაცემი (id უნიკალური უნდა იყოს).

username/password-ში გაწერეთ რაიმე მნიშვნელობები და მხოლოდ BARE ვებ სერვისის ყველა მეთოდმა უნდა შემოაწმოს გადმოცემული username/password და თუ რომელიმე არ დაემთხვა config.properties ფაილში არსებულს, დააბრუნოს ClientUnauthorized FAULT. მათი გადმოცემა კლიენტის მხრიდან კი უნდა მოხდეს მხოლოდ BARE ვებ სერვისში. ყველა Request ობიექტი ვებ მეთოდისთვის საჭირო პარამეტრების გარდა უნდა შეიცავდეს Auth ობიექტს, რომელსაც უნდა ჰქონდეს username და password სახელის მქონე  ველები და ვებ სერვისმა უნდა შეამოწმოს მათი სისწორე.

თუ გამომძახებელის IP მისამართი არ ხვდება config.properties ფაილში არსებულ allowed_ip ცვლადის სიაში, მაშინ ვებ სერვისის ყველა მეთოდმა უნდა დააბრუნოს AccessForbidden FAULT.

ვებ სერვისის უნდა ჰქონდეთ შემდეგი ვებ მეთოდები:

1. getPerson - გადაეცემა id და persons.xml ფაილიდან აბრუნებს შესაბამის id-ს მქონე პიროვნებას. თუ ვერ იპოვა ასეთი id-ს მქონე პიროვნება, დააბრუნოს PersonNotFound FAULT.

2. addPerson - გადაეცემა ახალი პიროვნება, რომელიც უნდა ჩაემატოს persons.xml ფაილში. თუ ახალი პიროვნების id ემთხვევა persons.xml ფაილში რომელიმე არსებულს, ვებ მეთოდი გავიდეს  PersonAlreadyExists FAULT-ზე. წარმატების შემთხვევაში დააბრუნოს true.

3. updatePerson - გადაეცემა Person-ის სრული ობიექტი (ყველა ველი შევსებული) და შესაბამის id-ზე persons.xml ფაილში უნდა განახლდეს პიროვნების ყველა ველი. თუ ვერ იპოვა ასეთი id-ს მქონე პიროვნება, დააბრუნოს PersonNotFound FAULT. წარმატების შემთხვევაში დააბრუნოს true.

4. deletePerson - გადაეცემა id და persons.xml ფაილიდან შლის შესაბამის id-ს მქონე პიროვნებას. თუ ვერ იპოვა ასეთი id-ს მქონე პიროვნება, დააბრუნოს PersonNotFound FAULT. წარმატების შემთხვევაში დააბრუნოს true.

5. listPersons - არაფერი გადაეცემა და აბრუნებს persons.xml ფაილში არსებულს ყველა პიროვნების სიას.
აპლიკაციას უნდა ჰქონდეს ლოგირება ჩვენი სტანდარტით და trace-ით ლოგავდეს მოთხოვნაში მიღებულ SOAP Request-ს და ასევე პასუხში დაბრუნებულ SOAP Response-ს.

აპლიკაციას ყველგან გამართულად უნდა ჰქონდეს შესაბამისი try-catch-ები. გაურკვეველ შეცდომებზე, როგორიცაა კონფიგურაციის ფაილის ვერ მოძებნა, persons.xml ფაილის ვერ მოძებნა, კონფიგურაციაში რაიმე საჭირო პარამეტრის არ ქონა და ა.შ. თითოეულმა მეთოდმა უნდა დააბრუნოს GeneralError-ის FAULT.

ატვირთულ დავალებაში აუცილებლად უნდა იყოს წარმოდგენილი SOAP UI-ის სქრინები თითოეული მეთოდის თითოეულზე case-ზე, სადაც ნათლად უნდა ჩანდეს, რომ ყველაფერი სწორად მუშაობს