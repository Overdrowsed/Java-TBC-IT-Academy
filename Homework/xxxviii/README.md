## დავალება 26.09.2022

შექმენით RESTEasy ვებ აპლიკაცია (ვებ სერვისი) და დაა-deploy-ეთ Tomcat-ზე. აპლიკაციას Tomcat-ის conf-ში უნდა ჰქონდეს config.properties ფაილი შემდეგი შიგთავსით:
database = აქ უნდა ეწეროს persons.xml ფაილის სრული მისამართი.
username = აპლიკაციის იუზერი.
password = აპლიკაციის პაროლი.
allowed_ip = დასაშვები IP-ების სია (ერთზე მეტი მნიშვნელობის შემთხვავში გაყოფილი ; წერტილ-მძიმით), რომლიდანაც შესაძლოა მოხდეს ვებ სერვისის გამოძახება.
config.properties ფაილი მეხსიერებაში უნდა იტვირთებოდეს ერთხელ და იქიდან ხებოდეს მისი წაკითხვა და თუ შეიცვალა მყარ დისკზე, მხოლოდ მაშინ ჩაიტვირთოს ხელახლა მეხსიერებაში.

persons.xml ფაილი შექმენით ხელით <person id="1"><first-name>Giorgi</first-name><last-name>Katsadze</last-name><age>33</age></person> სტრუქტურით და მასში ხელით ჩაწერეთ 10 ადამიანის მონაცემი (id უნიკალური უნდა იყოს).

username/password-ში გაწერეთ რაიმე მნიშვნელობები და ვებ სერვისის ყველა მეთოდმა უნდა შემოაწმოს გადმოცემული username/password და თუ რომელიმე არ დაემთხვა config.properties ფაილში არსებულს, დააბრუნოს HTTP 401 Unauthorized შეცდომა. მათი გადმოცემა კლიენტის მხრიდან კი უნდა მოხდეს username და password სახელის მქონე request header-ებში. Http Basic Auth არ გეგონოთ, უბრალოდ ორ ჰედერში უნდა გაყვეს მნიშვნელობები და სერვერის მხარემ შეამოწმოს მათი სისწორე.
თუ გამომძახებელის IP მისამართი არ ხვდება config.properties ფაილში არსებულ allowed_ip ცვლადის სიაში, მაშინ ვებ სერვისის ყველა მეთოდმა უნდა დააბრუნოს HTTP 403 Forbidden.

ვებ სერვისს უნდა ჰქონდეთ შემდეგი ვებ მეთოდები:

1. getPerson - HTTP GET-ის QueryParam-ით გადაეცემა id და persons.xml ფაილიდან აბრუნებს შესაბამის id-ს მქონე პიროვნებას. თუ ვერ იპოვა ასეთი id-ს მქონე პიროვნება, დააბრუნოს HTTP 404 Not Found შეცდომა.

2. addPerson - HTTP POST-ით გადაეცემა ახალი პიროვნება, რომელიც უნდა ჩაემატოს persons.xml ფაილში. თუ ახალი პიროვნების id ემთხვევა persons.xml ფაილში რომელიმე არსებულს, ვებ მეთოდი გავიდეს 409 Conflict შეცდომაზე.

3. updatePerson - HTTP PUT-ით გადაეცემა Person-ის სრული ობიექტი (ყველა ველი შევსებული) და შესაბამის id-ზე persons.xml ფაილში უნდა განახლდეს პიროვნების ყველა ველი. თუ ვერ იპოვა ასეთი id-ს მქონე პიროვნება, დააბრუნოს HTTP 404 Not Found შეცდომა.

4. deletePerson - HTTP DELETE-ის PathParam-ით გადაეცემა id და persons.xml ფაილიდან შლის შესაბამის id-ს მქონე პიროვნებას. თუ ვერ იპოვა ასეთი id-ს მქონე პიროვნება, დააბრუნოს HTTP 404 Not Found შეცდომა.

5. listPersons - HTTP GET-ით არაფერი გადაეცემა და აბრუნებს persons.xml ფაილში არსებულს ყველა პიროვნებას.

ყველა მეთოდმა წარმატების შემთხვევაში უნდა დაბრუნოს HTTP 200 OK.

მე-2 და მე-3 მეთოდებმა მოთხოვნა უნდა მიიღონ როგორც XML, ისე JSON ფომატში.

ყველა მეთოდმა პასუხი უნდა დააბრუნოს, როგორც XML-ში, ისე JSON-ში. დამოკიდებული უნდა იყოს კლიენტზე, რომელს აირჩევს შესაბამისი ჰედერის მითითებით.

აპლიკაციას უნდა ჰქონდეს ლოგირება ჩვენი სტანდარტით და trace-ით ლოგავდეს მოთხოვნაში მიღებულ პარამეტრებსა, თუ ობიექტს და ასევე პასუხში დაბრუნებულ ობიექტს. ყველა ობიექტი ილოგებოდეს JSON ფორმატში.

აპლიკაციას ყველგან გამართულად უნდა ჰქონდეს შესაბამისი try-catch-ები. გაურკვეველ შეცდომებზე, როგორიცაა კონფიგურაციის ფაილის ვერ მოძებნა, persons.xml ფაილის ვერ მოძებნა, კონფიგურაციაში რაიმე საჭირო პარამეტრის არ ქონა და ა.შ. თითოეულმა მეთოდმა უნდა დააბრუნოს HTTP 500 Internal Server Error.

ატვირთულ დავალებაში აუცილებლად უნდა იყოს წარმოდგენილი Postman-ის სქრინები თითოეული მეთოდის თითოეულზე case-ზე, სადაც ნათლად უნდა ჩანდეს, რომ ყველაფერი სწორად მუშაობს.
